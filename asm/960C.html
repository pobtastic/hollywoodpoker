<!DOCTYPE html>
<html>
<head>
<title>Hollywood Poker: Routine at 960C</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="95EF.html">95EF</a>
</td>
<td class="up">Up: <a href="../maps/all.html#960c">Map</a></td>
<td class="next">
Next: <a href="966C.html">966C</a>
</td>
</tr>
</table>
<div class="description">960C: Girl Artificial Intelligence</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="8D4A.html">PlayGame</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="960c"></span>
<div class="comments">
<div class="paragraph">
A reminder of the hand types and values: <table class="default">
<tr>
<th colspan="1" rowspan="1">Byte</th>
<th colspan="1" rowspan="1">Outcome</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">01</td>
<td class="" colspan="1" rowspan="1">High Card</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">02</td>
<td class="" colspan="1" rowspan="1">Pair</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">03</td>
<td class="" colspan="1" rowspan="1">Two Pairs</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">04</td>
<td class="" colspan="1" rowspan="1">Three-Of-A-Kind</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">05</td>
<td class="" colspan="1" rowspan="1">Straight</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">06</td>
<td class="" colspan="1" rowspan="1">Flush</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">07</td>
<td class="" colspan="1" rowspan="1">Full House</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">08</td>
<td class="" colspan="1" rowspan="1">Four-Of-A-Kind</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">09</td>
<td class="" colspan="1" rowspan="1">Straight Flush</td>
</tr>
</table>
</div>
<div class="paragraph">
Prepare how many times to call the random number generator.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GirlArtificialIntelligence</td>
<td class="address-2"><span id="960c"></span>960C</td>
<td class="instruction">LD A,($96C0)</td>
<td class="comment-1" rowspan="2">Fetch the girls hand type from *<a href="96C0.html">Table_GirlEvaluation</a> and store it in <span class="register">C</span> as the "try" counter.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="960f"></span>960F</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9610"></span>9610</td>
<td class="instruction">CP $02</td>
<td class="comment-1" rowspan="2">Jump to <a href="960C.html#9626">GirlAI_SetHoldTries</a> if the hand "type" is lower than, or equal to 02 ("Pair" or "High Card").</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9612"></span>9612</td>
<td class="instruction">JR C,<a href="960C.html#9626">GirlAI_SetHoldTries</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9614"></span>
<div class="comments">
<div class="paragraph">
Double the value in the "try" counter for outcomes: &quot;Two Pairs&quot;, &quot;Three-Of-A-Kind&quot;, &quot;Straight&quot;, &quot;Flush&quot;, &quot;Full House&quot;, &quot;Four-Of-A-Kind&quot; and &quot;Straight Flush&quot;.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9614"></span>9614</td>
<td class="instruction">RL C</td>
<td class="comment-1" rowspan="1">Multiply <span class="register">C</span> by two.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9616"></span>9616</td>
<td class="instruction">CP $04</td>
<td class="comment-1" rowspan="2">Jump to <a href="960C.html#961c">GirlAI_SetRaiseTries</a> if the hand "type" is lower than, or equal to 04 ("Two Pairs" or "Three-Of-A-Kind").</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9618"></span>9618</td>
<td class="instruction">JR C,<a href="960C.html#961c">GirlAI_SetRaiseTries</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="961a"></span>
<div class="comments">
<div class="paragraph">
Double the value again in the "try" counter for outcomes: &quot;Straight&quot;, &quot;Flush&quot;, &quot;Full House&quot;, &quot;Four-Of-A-Kind&quot; and &quot;Straight Flush&quot;.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="961a"></span>961A</td>
<td class="instruction">RL C</td>
<td class="comment-1" rowspan="1">Multiply <span class="register">C</span> by two.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="961c"></span>
<div class="comments">
<div class="paragraph">
Set a number of "tries" to pick a random number under 0E.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GirlAI_SetRaiseTries</td>
<td class="address-2"><span id="961c"></span>961C</td>
<td class="instruction">LD B,C</td>
<td class="comment-1" rowspan="1">Set a counter in <span class="register">B</span> which is just the value copied from <span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label">GirlAI_SetRaiseTries_Loop</td>
<td class="address-2"><span id="961d"></span>961D</td>
<td class="instruction">CALL <a href="9579.html">GetRandomNumber</a></td>
<td class="comment-1" rowspan="1">Call <a href="9579.html">GetRandomNumber</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9620"></span>9620</td>
<td class="instruction">CP $0E</td>
<td class="comment-1" rowspan="2">Jump to <a href="960C.html#9637">GirlAI_Raise</a> if <span class="register">A</span> is lower than 0E.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9622"></span>9622</td>
<td class="instruction">JR C,<a href="960C.html#9637">GirlAI_Raise</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9624"></span>9624</td>
<td class="instruction">DJNZ <a href="960C.html#961d">GirlAI_SetRaiseTries_Loop</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="960C.html#961d">GirlAI_SetRaiseTries_Loop</a> until counter is zero.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9626"></span>
<div class="comments">
<div class="paragraph">
Set a number of "tries" to pick a random number under 1E.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GirlAI_SetHoldTries</td>
<td class="address-2"><span id="9626"></span>9626</td>
<td class="instruction">LD B,C</td>
<td class="comment-1" rowspan="1">Set a counter in <span class="register">B</span> which is just the value copied from <span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label">GirlAI_SetHoldTries_Loop</td>
<td class="address-2"><span id="9627"></span>9627</td>
<td class="instruction">CALL <a href="9579.html">GetRandomNumber</a></td>
<td class="comment-1" rowspan="1">Call <a href="9579.html">GetRandomNumber</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="962a"></span>962A</td>
<td class="instruction">CP $1E</td>
<td class="comment-1" rowspan="2">Jump to <a href="968C.html">GirlAction_Hold</a> if <span class="register">A</span> is lower than 1E.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="962c"></span>962C</td>
<td class="instruction">JR C,<a href="968C.html">GirlAction_Hold</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="962e"></span>962E</td>
<td class="instruction">DJNZ <a href="960C.html#9627">GirlAI_SetHoldTries_Loop</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="960C.html#9627">GirlAI_SetHoldTries_Loop</a> until counter is zero.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9630"></span>
<div class="comments">
<div class="paragraph">
If we made it this far then the girl will just drop, if you're playing along here then YES, albeit fairly unlikely - there is still a slim chance that the girl will DROP even if she has a Royal Straight Flush!
</div>
<div class="paragraph">
Messaging options: <table class="default">
<tr>
<th colspan="1" rowspan="1">ID</th>
<th colspan="1" rowspan="1">Message</th>
<th colspan="1" rowspan="1">ID</th>
<th colspan="1" rowspan="1">Message</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">01</td>
<td class="centre" colspan="1" rowspan="1"><img alt="message-01-00" src="../images/scr/message-01-00.png" /></td>
<td class="centre" colspan="1" rowspan="1">02</td>
<td class="centre" colspan="1" rowspan="1"><img alt="message-01-01" src="../images/scr/message-01-01.png" /></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">03</td>
<td class="centre" colspan="1" rowspan="1"><img alt="message-01-02" src="../images/scr/message-01-02.png" /></td>
<td class="centre" colspan="1" rowspan="1">04</td>
<td class="centre" colspan="1" rowspan="1"><img alt="message-01-03" src="../images/scr/message-01-03.png" /></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">05</td>
<td class="centre" colspan="1" rowspan="1"><img alt="message-01-04" src="../images/scr/message-01-04.png" /></td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9630"></span>9630</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Call <a href="7D97.html">Messaging_Girl</a> using message block <a href="7F9D.html">01</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9632"></span>9632</td>
<td class="instruction">CALL <a href="7D97.html">Messaging_Girl</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9635"></span>9635</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Return with <span class="register">A</span>=00 ("drop").</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9636"></span>9636</td>
<td class="instruction">RET</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9637"></span>
<div class="comments">
<div class="paragraph">
Handle the girl choosing to raise.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GirlAI_Raise</td>
<td class="address-2"><span id="9637"></span>9637</td>
<td class="instruction">LD A,($8E59)</td>
<td class="comment-1" rowspan="3">Jump to <a href="968C.html">GirlAction_Hold</a> if *<a href="8E59.html">InteractionCounter</a> is equal to 07.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="963a"></span>963A</td>
<td class="instruction">CP $07</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="963c"></span>963C</td>
<td class="instruction">JR Z,<a href="968C.html">GirlAction_Hold</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="963e"></span>963E</td>
<td class="instruction">LD A,($96B7)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="96B7.html">CurrentRaiseValue</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9641"></span>9641</td>
<td class="instruction">CALL <a href="96A1.html">GirlAddToPot</a></td>
<td class="comment-1" rowspan="1">Call <a href="96A1.html">GirlAddToPot</a>.</td>
</tr>
<tr>
<td class="asm-label">GirlAI_Raise_Loop</td>
<td class="address-2"><span id="9644"></span>9644</td>
<td class="instruction">CALL <a href="9579.html">GetRandomNumber</a></td>
<td class="comment-1" rowspan="1">Call <a href="9579.html">GetRandomNumber</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9647"></span>9647</td>
<td class="instruction">SRA A</td>
<td class="comment-1" rowspan="2">Divide the random number by 02 and subtract 06.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9649"></span>9649</td>
<td class="instruction">SUB $06</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="964b"></span>964B</td>
<td class="instruction">JR C,<a href="960C.html#9644">GirlAI_Raise_Loop</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="960C.html#9644">GirlAI_Raise_Loop</a> and try again if the result is negative.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="964d"></span>
<div class="comments">
<div class="paragraph">
The raise value is 00 or higher.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="964d"></span>964D</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">Store the raise value in <span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="964e"></span>964E</td>
<td class="instruction">LD A,($96B6)</td>
<td class="comment-1" rowspan="3">Jump to <a href="966C.html">GirlAction_Raise</a> if *<a href="96B6.html">GirlCash</a> is higher than <span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9651"></span>9651</td>
<td class="instruction">CP B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9652"></span>9652</td>
<td class="instruction">JR NC,<a href="966C.html">GirlAction_Raise</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9654"></span>
<div class="comments">
<div class="paragraph">
Handle if the raise value is higher than the girls current cash balance.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9654"></span>9654</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1">Does the girl have any cash left?</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9655"></span>9655</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1">Store the girls current cash balance in <span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9656"></span>9656</td>
<td class="instruction">JR NZ,<a href="966C.html">GirlAction_Raise</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="966C.html">GirlAction_Raise</a> if the raise value is not zero.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="9658"></span>
<div class="comments">
<div class="paragraph">
Handle the girl choosing to hold.
</div>
<div class="paragraph">
Messaging options: <table class="default">
<tr>
<th colspan="1" rowspan="1">ID</th>
<th colspan="1" rowspan="1">Message</th>
<th colspan="1" rowspan="1">ID</th>
<th colspan="1" rowspan="1">Message</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">01</td>
<td class="centre" colspan="1" rowspan="1"><img alt="message-03-00" src="../images/scr/message-03-00.png" /></td>
<td class="centre" colspan="1" rowspan="1">02</td>
<td class="centre" colspan="1" rowspan="1"><img alt="message-03-01" src="../images/scr/message-03-01.png" /></td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">03</td>
<td class="centre" colspan="1" rowspan="1"><img alt="message-03-02" src="../images/scr/message-03-02.png" /></td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">GirlAI_Hold</td>
<td class="address-2"><span id="9658"></span>9658</td>
<td class="instruction">LD A,$03</td>
<td class="comment-1" rowspan="2">Call <a href="7D97.html">Messaging_Girl</a> using message block <a href="81B9.html">03</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="965a"></span>965A</td>
<td class="instruction">CALL <a href="7D97.html">Messaging_Girl</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="965d"></span>965D</td>
<td class="instruction">LD A,($96B7)</td>
<td class="comment-1" rowspan="2"><span class="register">D</span>=*<a href="96B7.html">CurrentRaiseValue</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9660"></span>9660</td>
<td class="instruction">LD D,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9661"></span>9661</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Write 00 to *<a href="96B7.html">CurrentRaiseValue</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9662"></span>9662</td>
<td class="instruction">LD ($96B7),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9665"></span>9665</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="4">Return with <span class="register">A</span>=02 ("hold") if <span class="register">D</span> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9666"></span>9666</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9667"></span>9667</td>
<td class="instruction">LD A,$02</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="9669"></span>9669</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="966a"></span>966A</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="2">Return with <span class="register">A</span>=03 ("showdown").</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="966b"></span>966B</td>
<td class="instruction">RET</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="95EF.html">95EF</a>
</td>
<td class="up">Up: <a href="../maps/all.html#960c">Map</a></td>
<td class="next">
Next: <a href="966C.html">966C</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1986 Golden Games &copy; 2025 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.4.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/hollywoodpoker/">Source code</a>.</div>
<div><a href="../dec/asm/38412.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>